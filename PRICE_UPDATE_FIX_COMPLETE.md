# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–î–∞—Ç–∞: 24.11.2025
–í–µ—Ä—Å–∏—è: 1.0.5

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–¶–µ–Ω–∞ –º–æ–¥–µ–ª–∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∞—Å—å –≤ UI –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –º–æ–¥–µ–ª–∏:
1. `#current-model-cost` - –Ω–∞–¥ –ø—Ä–æ–º–ø—Ç–æ–º (–ø–æ–∫–∞–∑—ã–≤–∞–ª–æ "10" –≤–º–µ—Å—Ç–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã)
2. `#image-model-info-cost` - –≤ –±–ª–æ–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–æ–¥–µ–ª–∏

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª—ë–Ω `image-price-calculator.js`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª `#current-model-cost`

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ü–µ–Ω—ã

```javascript
function updateTotalCost() {
  const quantity = parseInt(numberResults?.value) || 1;
  const total = baseCost * quantity;

  // 1. Update #current-model-cost (–Ω–∞–¥ –ø—Ä–æ–º–ø—Ç–æ–º)
  const currentModelCost = document.getElementById('current-model-cost');
  if (currentModelCost) {
    if (quantity > 1) {
      currentModelCost.textContent = `${baseCost} √ó ${quantity} = ${total}`;
    } else {
      currentModelCost.textContent = baseCost;
    }
  }

  // 2. Update #image-model-info-cost (–≤ –±–ª–æ–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)
  const modelInfoCost = document.getElementById('image-model-info-cost');
  if (modelInfoCost) {
    if (quantity > 1) {
      modelInfoCost.textContent = `${baseCost} √ó ${quantity} = ${total} TOK`;
    } else {
      modelInfoCost.textContent = `${total} TOK`;
    }
  }
}
```

### 2. –û–±–Ω–æ–≤–ª—ë–Ω `generate.js`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å `modelCosts` –≤–º–µ—Å—Ç–æ —Ü–µ–Ω—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–º —Ü–µ–Ω—ã

```javascript
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const cost = modelCosts[model] || baseCost;
if (costDisplay) costDisplay.textContent = cost;

// –ù–æ–≤—ã–π –∫–æ–¥ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
const config = card.dataset.config ? JSON.parse(card.dataset.config) : null;
const cost = config && config.token_cost ? config.token_cost : (modelCosts[model] || baseCost);

// Use price calculator
if (window.imageGenPriceCalculator) {
  window.imageGenPriceCalculator.setBaseCost(cost);
} else if (window.updateImageBaseCost) {
  window.updateImageBaseCost(cost);
}
```

### 3. –û–±–Ω–æ–≤–ª—ë–Ω `update-image-model-info.js`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –≤—ã–∑—ã–≤–∞–ª—Å—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–æ–¥–µ–ª–∏

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞

```javascript
// –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–∑–æ–≤—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ
const tokenCost = config.token_cost || 10;
if (window.imageGenPriceCalculator) {
  window.imageGenPriceCalculator.setBaseCost(tokenCost);
} else if (window.updateImageBaseCost) {
  window.updateImageBaseCost(tokenCost);
} else {
  // Fallback
  if (costEl) costEl.textContent = `${tokenCost} TOK`;
}
```

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### –ü–æ—Ç–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –º–æ–¥–µ–ª—å
   ‚Üì
2. generate.js –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–∫
   ‚Üì
3. –ü–æ–ª—É—á–∞–µ—Ç —Ü–µ–Ω—É –∏–∑ data-config –∫–∞—Ä—Ç–æ—á–∫–∏
   const config = JSON.parse(card.dataset.config);
   const cost = config.token_cost; // –ù–∞–ø—Ä–∏–º–µ—Ä, 20 TOK
   ‚Üì
4. –í—ã–∑—ã–≤–∞–µ—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
   imageGenPriceCalculator.setBaseCost(cost);
   ‚Üì
5. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç –í–°–ï —ç–ª–µ–º–µ–Ω—Ç—ã
   - #current-model-cost ‚Üí "20"
   - #image-model-info-cost ‚Üí "20 TOK"
   ‚Üì
6. update-image-model-info.js —Ç–∞–∫–∂–µ –≤—ã–∑—ã–≤–∞–µ—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
   (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏)
```

### –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ 3
   ‚Üì
2. image-price-calculator.js —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ
   ‚Üì
3. –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ü–µ–Ω—É
   total = 20 √ó 3 = 60
   ‚Üì
4. –û–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
   - #current-model-cost ‚Üí "20 √ó 3 = 60"
   - #image-model-info-cost ‚Üí "20 √ó 3 = 60 TOK"
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –ú–æ–¥–µ–ª—å —Å —Ü–µ–Ω–æ–π 10 TOK

**–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏:**
```
#current-model-cost ‚Üí "10"
#image-model-info-cost ‚Üí "10 TOK"
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 1:**
```
#current-model-cost ‚Üí "10"
#image-model-info-cost ‚Üí "10 TOK"
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 3:**
```
#current-model-cost ‚Üí "10 √ó 3 = 30"
#image-model-info-cost ‚Üí "10 √ó 3 = 30 TOK"
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 6:**
```
#current-model-cost ‚Üí "10 √ó 6 = 60"
#image-model-info-cost ‚Üí "10 √ó 6 = 60 TOK"
```

### –ü—Ä–∏–º–µ—Ä 2: –ú–æ–¥–µ–ª—å —Å —Ü–µ–Ω–æ–π 20 TOK

**–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏:**
```
#current-model-cost ‚Üí "20"
#image-model-info-cost ‚Üí "20 TOK"
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 1:**
```
#current-model-cost ‚Üí "20"
#image-model-info-cost ‚Üí "20 TOK"
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 3:**
```
#current-model-cost ‚Üí "20 √ó 3 = 60"
#image-model-info-cost ‚Üí "20 √ó 3 = 60 TOK"
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 6:**
```
#current-model-cost ‚Üí "20 √ó 6 = 120"
#image-model-info-cost ‚Üí "20 √ó 6 = 120 TOK"
```

---

## üîç –ì–¥–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω–∞

### 1. #current-model-cost
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–∞–¥ –ø—Ä–æ–º–ø—Ç–æ–º
**HTML:**
```html
<span id="current-model-cost">10</span>
```
**–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:**
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –º–æ–¥–µ–ª–∏ (generate.js ‚Üí –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä)
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä)

### 2. #image-model-info-cost
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –í –±–ª–æ–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–æ–¥–µ–ª–∏
**HTML:**
```html
<div id="image-model-info-cost">10 TOK</div>
```
**–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:**
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –º–æ–¥–µ–ª–∏ (update-image-model-info.js ‚Üí –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä)
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä)

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `static/js/image-price-calculator.js`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `#current-model-cost`
- –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

### 2. `static/js/generate.js`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–º —Ü–µ–Ω—ã
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω—ã –∏–∑ `data-config` –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è
- Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥ –µ—Å–ª–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### 3. `static/js/update-image-model-info.js`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏
- Fallback –Ω–∞ –ø—Ä—è–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ—Å–ª–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –®–∞–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ `/generate/new`**

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
   - –ù–∞–¥ –ø—Ä–æ–º–ø—Ç–æ–º: "–°—Ç–æ–∏–º–æ—Å—Ç—å: 10" (–∏–ª–∏ –¥—Ä—É–≥–∞—è —Ü–µ–Ω–∞)
   - –í –±–ª–æ–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: "–°—Ç–æ–∏–º–æ—Å—Ç—å: 10 TOK"

3. **–í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å:**
   - –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö
   - –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º–æ–¥–µ–ª—å —Å—Ç–æ–∏—Ç 20 TOK:
     - –ù–∞–¥ –ø—Ä–æ–º–ø—Ç–æ–º: "20"
     - –í –±–ª–æ–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: "20 TOK"

4. **–ò–∑–º–µ–Ω–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   - –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–±–µ—Ä–∏—Ç–µ 3
   - –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å—Å—è:
     - –ù–∞–¥ –ø—Ä–æ–º–ø—Ç–æ–º: "20 √ó 3 = 60"
     - –í –±–ª–æ–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: "20 √ó 3 = 60 TOK"

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏:**
   - –ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–≤–æ—é —Ü–µ–Ω—É
   - –¶–µ–Ω–∞ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ–ª–µ `token_cost`)

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–¶–µ–Ω–∞ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** ‚úÖ
   - –ò–∑ –ø–æ–ª—è `token_cost` –º–æ–¥–µ–ª–∏
   - –ù–µ –∏–∑ —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è

2. **–¶–µ–Ω–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –º–æ–¥–µ–ª–∏** ‚úÖ
   - –í –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö UI
   - –ß–µ—Ä–µ–∑ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ü–µ–Ω—ã

3. **–¶–µ–Ω–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞** ‚úÖ
   - –§–æ—Ä–º—É–ª–∞: –±–∞–∑–æ–≤–∞—è √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è 3 —Å–∫—Ä–∏–ø—Ç–æ–≤** ‚úÖ
   - generate.js (–≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏)
   - update-image-model-info.js (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
   - image-price-calculator.js (—Ä–∞—Å—á—ë—Ç)

5. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã** ‚úÖ
   - –ï—Å–ª–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
   - –ü—Ä—è–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!

**–í–µ—Ä—Å–∏—è:** 1.0.5
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
**–î–∞—Ç–∞:** 24.11.2025
