#!/usr/bin/env python3
"""
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–æ—Ä–º—ã:
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –í–ù–£–¢–†–ò —Ñ–æ—Ä–º—ã, –Ω–æ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–¥ –∫–Ω–æ–ø–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
"""

import re

print("üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–æ—Ä–º—ã...")

with open('templates/generate/new.html', 'r', encoding='utf-8') as f:
    content = f.read()

# –ù–∞—Ö–æ–¥–∏–º –≥–¥–µ —Å–µ–π—á–∞—Å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –∏ –≥–¥–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
# –ù—É–∂–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å </form> –≤ —Å–∞–º—ã–π –∫–æ–Ω–µ—Ü, –ø–æ—Å–ª–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

# 1. –£–¥–∞–ª—è–µ–º –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã
old_form_close = '</div>\n    </div>\n  </form>\n\n  <!-- –û—á–µ—Ä–µ–¥—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏'
new_form_close = '</div>\n    </div>\n\n  <!-- –û—á–µ—Ä–µ–¥—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏'

content = content.replace(old_form_close, new_form_close)

# 2. –ù–∞—Ö–æ–¥–∏–º –∫–æ–Ω–µ—Ü –±–ª–æ–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–∞–º –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã
params_end = "{% include 'generate/reference_upload_component.html' with target_id='image' %}\n  </div>"
params_end_with_form = "{% include 'generate/reference_upload_component.html' with target_id='image' %}\n  </div>\n  </form>"

content = content.replace(params_end, params_end_with_form)

# –°–æ—Ö—Ä–∞–Ω—è–µ–º
with open('templates/generate/new.html', 'w', encoding='utf-8') as f:
    f.write(content)

print("‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–æ—Ä–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!")
print("\n–¢–µ–ø–µ—Ä—å —Ñ–æ—Ä–º–∞ –≤–∫–ª—é—á–∞–µ—Ç:")
print("1. ‚úÖ –ü—Ä–æ–º–ø—Ç")
print("2. ‚úÖ –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏")
print("3. ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏")
print("4. ‚úÖ –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏")
print("5. ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º—ã!)")
print("6. ‚úÖ –†–µ—Ñ–µ—Ä–µ–Ω—Å—ã (–≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º—ã!)")
print("\n–û—á–µ—Ä–µ–¥—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Å—Ç–∞—ë—Ç—Å—è –≤–Ω–µ —Ñ–æ—Ä–º—ã (–∫–∞–∫ –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å)")
