#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

echo "üöÄ –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô –ó–ê–©–ò–¢–´ –û–¢ TOR/VPN"
echo "=========================================="
echo ""

echo "üì• 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ Git..."
git pull origin main
echo ""

echo "üîÑ 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
docker-compose down
docker-compose up -d
echo ""

echo "‚è≥ 3. –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ (10 —Å–µ–∫)..."
sleep 10
echo ""

echo "‚úÖ 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
docker-compose ps
echo ""

echo "üß™ 5. –ó–∞–ø—É—Å–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏..."
docker-compose exec web python /app/diagnose_system.py
echo ""

echo "üìä 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è..."
docker-compose exec web python /app/test_tor_protection.py
echo ""

echo "=" * 70
echo "‚úÖ –ì–û–¢–û–í–û! –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:"
echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ"
echo "2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã"
echo "3. –û—Ç–∫—Ä–æ–π—Ç–µ Tor Browser"
echo "4. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –¢–ï –ñ–ï —Ç–æ–∫–µ–Ω—ã (–Ω–µ 30 –Ω–æ–≤—ã—Ö!)"
echo "=" * 70
