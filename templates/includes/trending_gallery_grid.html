{# FILE: templates/includes/trending_gallery_grid.html #}
<!-- Gallery Grid -->
{% if trending_photos %}
  <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
    {% for p in trending_photos %}
      {% url 'gallery:photo_detail' p.pk as detail_url %}

      <article class="rounded-3xl border border-[var(--bord)] bg-[var(--card)] shadow-[0_8px_30px_rgba(0,0,0,0.18)] backdrop-blur-sm overflow-hidden group" itemscope itemtype="https://schema.org/ImageObject">
        <a href="{{ detail_url }}" title="{{ p.title|default:'Изображение' }}" class="block">
          {% if p.image %}
            <img class="imgcard" 
                 loading="lazy" 
                 src="{{ p.image.url }}" 
                 alt="{{ p.title|default:'Изображение' }}" 
                 itemprop="thumbnailUrl"
                 sizes="(max-width:480px) 50vw, (max-width:768px) 33vw, 25vw">
          {% else %}
            <div class="imgcard bg-gray-200 dark:bg-gray-700 flex items-center justify-center" aria-hidden="true">
              <svg class="w-8 h-8 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z"/>
              </svg>
            </div>
          {% endif %}
        </a>
        
        <div class="p-2 flex items-center justify-between text-xs">
          <span class="inline-flex items-center px-2 py-1 rounded-full text-[10px] font-medium border border-[var(--bord)] bg-black/5 text-[var(--text)] no-underline transition-all duration-200 ease-in-out"" itemprop="name">
            {% with t=p.title|default:'Изображение' %}
              {{ t|truncatewords:1 }}
            {% endwith %}
          </span>
          <span class="text-[var(--muted)] flex items-center gap-1">
            <svg class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
            </svg>
            {% if p.likes_count >= 1000 %}
              {{ p.likes_count|floatformat:1|default:0 }}k
            {% else %}
              {{ p.likes_count|default:0 }}
            {% endif %}
          </span>
        </div>
      </article>
    {% endfor %}
  </div>
{% else %}
  <!-- Empty State -->
  <div class="card p-8 text-center">
    <div class="w-12 h-12 mx-auto mb-4 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center">
      <svg class="w-6 h-6 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
      </svg>
    </div>
    <h3 class="font-semibold mb-2">Пока нет работ</h3>
    <p class="text-[var(--muted)] text-sm mb-4">Станьте первым, кто поделится своим творением</p>
    <a class="btn btn-primary" href="{% url 'generate:new' %}">
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
      </svg>
      Создать изображение
    </a>
  </div>
{% endif %}