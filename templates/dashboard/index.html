{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block meta_title %}–ö–∞–±–∏–Ω–µ—Ç ‚Äî AI Gallery{% endblock %}
{% block meta_description %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: –±–∞–ª–∞–Ω—Å —Ç–æ–∫–µ–Ω–æ–≤ –∏ –±—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã —Å–µ—Ä–≤–∏—Å–∞.{% endblock %}
{% block canonical %}{{ request.scheme }}://{{ request.get_host }}{% url 'dashboard:index' %}{% endblock %}
{% block robots %}noindex, nofollow{% endblock %}

{% block hero %}
<!-- Hero Section -->
<section class="relative py-12 sm:py-16">
  <div class="container">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <div>
        <h1 class="text-3xl sm:text-4xl font-bold">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ request.user.first_name|default:request.user.username }}!</h1>
        <p class="text-[var(--muted)] mt-2">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º –∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
      </div>
      <div class="flex items-center gap-3">
        <a class="btn btn-primary" href="{% url 'generate:new' %}">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
          </svg>
          –°–æ–∑–¥–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        </a>
        <a class="btn btn-ghost" href="{% url 'gallery:index' %}">–ì–∞–ª–µ—Ä–µ—è</a>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block breadcrumbs %}
<!-- Breadcrumbs -->
<nav class="container py-3 border-b border-[var(--bord)]" aria-label="–•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏">
  <ol class="flex items-center gap-2 text-sm">
    <li>
      <a href="{% url 'pages:home' %}" class="text-[var(--muted)] hover:text-[var(--text)] transition">–ì–ª–∞–≤–Ω–∞—è</a>
    </li>
    <li class="text-[var(--muted)]">
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
      </svg>
    </li>
    <li aria-current="page" class="font-medium">–ö–∞–±–∏–Ω–µ—Ç</li>
  </ol>
</nav>

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"BreadcrumbList",
  "itemListElement":[
    {"@type":"ListItem","position":1,"name":"–ì–ª–∞–≤–Ω–∞—è","item":"{{ request.scheme }}://{{ request.get_host }}{% url 'pages:home' %}"},
    {"@type":"ListItem","position":2,"name":"–ö–∞–±–∏–Ω–µ—Ç","item":"{{ request.scheme }}://{{ request.get_host }}{% url 'dashboard:index' %}"}
  ]
}
</script>
{% endblock %}

{% block content %}
<div class="">
  {% include "includes/messages.html" %}
  
  <!-- Dashboard Grid -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

    
  <div class="lg:col-span-8 space-y-6 min-w-0">
      
      <!-- Balance Card -->
      <section class="card p-6 sm:p-8" aria-labelledby="balanceTitle">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
          <div>
            <h2 class="text-xl font-bold mb-2" id="balanceTitle">–í–∞—à –±–∞–ª–∞–Ω—Å</h2>
            <p class="text-[var(--muted)]">–¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</p>
          </div>
          
          <!-- Balance Display -->
          <div class="flex items-center gap-4">
            <div class="text-center">
              <div class="flex items-center justify-center gap-2 mb-1">
                <div class="w-8 h-8 rounded-xl bg-primary/15 flex items-center justify-center">
                  <svg class="w-4 h-4 text-primary" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V9M19 9H14V4H15.83L19 7.17V9Z"/>
                  </svg>
                </div>
                <div class="text-2xl font-bold">{{ wallet.balance|default:0 }}</div>
                <div class="text-sm text-[var(--muted)]">TOK</div>
              </div>
              <div class="text-xs text-[var(--muted)]">
                ‚âà {% widthratio wallet.balance|default:0 10 1 %} –æ–±—Ä–∞–±–æ—Ç–æ–∫
              </div>
            </div>
          </div>
        </div>
        
        <!-- Balance Actions -->
        <div class="flex flex-wrap gap-3">
          <a class="btn btn-primary" href="{% url 'dashboard:billing' %}">
            <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
            </svg>
            –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å
          </a>
          <a class="btn btn-ghost" href="{% url 'generate:new' %}">
            <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
            –ù–∞—á–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
          </a>
        </div>
        
        <!-- Balance Info -->
        <div class="mt-6 p-4 rounded-2xl bg-black/[.02] dark:bg-white/[.02] border border-[var(--bord)]">
          <div class="flex items-start gap-3">
            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
              <path d="M13 9H11V7H13M13 17H11V15H13M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2Z"/>
            </svg>
            <div class="text-sm">
              <div class="font-medium mb-1">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–∫–µ–Ω—ã</div>
              <p class="text-[var(--muted)]">
                1 –æ–±—Ä–∞–±–æ—Ç–∫–∞ = {{ TOKENS_PRICE_PER_GEN|default:10 }} TOK. 
                –ì–æ—Å—Ç–µ–≤–æ–π –æ—Å—Ç–∞—Ç–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç –ø—Ä–∏ –≤—Ö–æ–¥–µ.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- Recent Activity -->
      <section class="card p-6" aria-labelledby="activityTitle">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6">
          <h2 class="text-xl font-bold" id="activityTitle">–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h2>
          <a class="btn btn-ghost text-sm w-full sm:w-auto" href="{% url 'dashboard:my_jobs' %}">
            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ
            <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </a>
        </div>

        {% if recent_jobs %}
          <div class="space-y-3">
            {% for j in recent_jobs %}
              <a class="flex items-center gap-4 p-3 rounded-xl border border-[var(--bord)] hover:bg-black/[.02] dark:hover:bg-white/[.02] transition" href="{{ j.detail_url }}">
                {% if j.img_url %}
                  <img class="w-12 h-12 rounded-xl object-cover" src="{{ j.img_url }}" alt="{{ j.title|default:'–û–±—Ä–∞–±–æ—Ç–∫–∞' }}">
                {% else %}
                  <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-blue-600"></div>
                {% endif %}
                <div class="flex-1 min-w-0">
                  <div class="font-medium truncate">{{ j.title|default:"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è" }}</div>
                  <div class="text-sm text-[var(--muted)]">
                    {{ j.created_at|date:'d.m.Y H:i' }} ‚Ä¢ {{ j.status_label }}
                  </div>
                </div>
                <div class="pill text-xs">
                  {% if j.status_kind == 'done' %}–ì–æ—Ç–æ–≤–æ{% elif j.status_kind == 'fail' %}–û—à–∏–±–∫–∞{% elif j.status_kind == 'run' %}–û–±—Ä–∞–±–æ—Ç–∫–∞{% elif j.status_kind == 'queue' %}–í –æ—á–µ—Ä–µ–¥–∏{% else %}‚Äî{% endif %}
                </div>
              </a>
            {% endfor %}
          </div>
        {% else %}
          <div class="text-center py-8">
            <div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center">
              <svg class="w-8 h-8 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
            </div>
            <h3 class="font-semibold mb-2">–ü–æ–∫–∞ –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–æ–∫</h3>
            <p class="text-[var(--muted)] mb-4">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–¥–µ—Å—å</p>
            <a class="btn btn-primary" href="{% url 'generate:new' %}">–°–æ–∑–¥–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</a>
          </div>
        {% endif %}
      </section>
    </div>

    <!-- Sidebar -->
  <aside class="lg:col-span-4 space-y-6 min-w-0">
      
      <!-- Quick Actions -->
      <section class="card p-6" aria-labelledby="quickTitle">
        <h2 class="text-lg font-semibold mb-4" id="quickTitle">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <nav class="space-y-2">
          <a class="flex items-center gap-3 p-3 rounded-xl hover:bg-black/[.04] dark:hover:bg-white/10 transition group" href="{% url 'dashboard:my_jobs' %}">
            <div class="w-8 h-8 rounded-lg bg-blue-500/15 flex items-center justify-center group-hover:bg-blue-500/25 transition">
              <svg class="w-4 h-4 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
              </svg>
            </div>
            <span class="font-medium">–ú–æ–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏</span>
          </a>
          
          <a class="flex items-center gap-3 p-3 rounded-xl hover:bg-black/[.04] dark:hover:bg-white/10 transition group" href="{% url 'gallery:index' %}">
            <div class="w-8 h-8 rounded-lg bg-purple-500/15 flex items-center justify-center group-hover:bg-purple-500/25 transition">
              <svg class="w-4 h-4 text-purple-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
            </div>
            <span class="font-medium">–ì–∞–ª–µ—Ä–µ—è</span>
          </a>
          
          <a class="flex items-center gap-3 p-3 rounded-xl hover:bg-black/[.04] dark:hover:bg-white/10 transition group" href="{% url 'generate:new' %}">
            <div class="w-8 h-8 rounded-lg bg-green-500/15 flex items-center justify-center group-hover:bg-green-500/25 transition">
              <svg class="w-4 h-4 text-green-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
              </svg>
            </div>
            <span class="font-medium">–ù–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è</span>
          </a>
          
          <a class="flex items-center gap-3 p-3 rounded-xl hover:bg-black/[.04] dark:hover:bg-white/10 transition group" href="{% url 'dashboard:tips' %}">
            <div class="w-8 h-8 rounded-lg bg-amber-500/15 flex items-center justify-center group-hover:bg-amber-500/25 transition">
              <svg class="w-4 h-4 text-amber-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
            </div>
            <span class="font-medium">–ü–æ–¥—Å–∫–∞–∑–∫–∏</span>
          </a>
        </nav>
      </section>

      <!-- Account Settings -->
      <section class="card p-6" aria-labelledby="settingsTitle">
        <h2 class="text-lg font-semibold mb-4" id="settingsTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
        <nav class="space-y-2">
          <a class="flex items-center gap-3 p-3 rounded-xl hover:bg-black/[.04] dark:hover:bg-white/10 transition group" href="{% url 'account_change_password' %}">
            <div class="w-8 h-8 rounded-lg bg-orange-500/15 flex items-center justify-center group-hover:bg-orange-500/25 transition">
              <svg class="w-4 h-4 text-orange-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
              </svg>
            </div>
            <span class="font-medium">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</span>
          </a>
          
          <a class="flex items-center gap-3 p-3 rounded-xl hover:bg-black/[.04] dark:hover:bg-white/10 transition group text-red-600 dark:text-red-400" href="{% url 'account_logout' %}">
            <div class="w-8 h-8 rounded-lg bg-red-500/15 flex items-center justify-center group-hover:bg-red-500/25 transition">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
              </svg>
            </div>
            <span class="font-medium">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
          </a>
        </nav>
      </section>

      <!-- Usage Stats -->
      <section class="card p-6" aria-labelledby="statsTitle">
        <h2 class="text-lg font-semibold mb-4" id="statsTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <span class="text-[var(--muted)]">–í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–æ–∫</span>
            <span class="font-semibold">42</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-[var(--muted)]">–≠—Ç–æ—Ç –º–µ—Å—è—Ü</span>
            <span class="font-semibold">8</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-[var(--muted)]">–õ–∞–π–∫–æ–≤ –ø–æ–ª—É—á–µ–Ω–æ</span>
            <span class="font-semibold">156</span>
          </div>
          <div class="pt-3 border-t border-[var(--bord)]">
            <div class="flex items-center justify-between">
              <span class="text-[var(--muted)]">–£—á–∞—Å—Ç–Ω–∏–∫ —Å</span>
              <span class="font-semibold">{{ request.user.date_joined|date:"M Y" }}</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Quick Tips -->
      <section class="card p-6" aria-labelledby="tipsTitle">
        <h2 class="text-lg font-semibold mb-4" id="tipsTitle">–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã</h2>
        <div class="space-y-3">
          <div class="p-3 rounded-xl bg-primary/5 border border-primary/20">
            <div class="text-sm font-medium text-primary mb-1">üí° –°–æ–≤–µ—Ç –¥–Ω—è</div>
            <p class="text-xs text-[var(--muted)]">
              –î–æ–±–∞–≤–ª—è–π—Ç–µ –¥–µ—Ç–∞–ª–∏ –æ—Å–≤–µ—â–µ–Ω–∏—è –≤ –ø—Ä–æ–º–ø—Ç: "soft rim light", "golden hour" –¥–ª—è –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
            </p>
          </div>
          
          <div class="text-center">
            <a class="btn btn-ghost text-sm w-full" href="{% url 'dashboard:tips' %}">
              –ë–æ–ª—å—à–µ —Å–æ–≤–µ—Ç–æ–≤
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </a>
          </div>
        </div>
      </section>
    </aside>
</div>


{% endblock %}