#!/usr/bin/env python3
"""
–ó–∞–º–µ–Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤:
1. –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–µ—Ä—Ö—É
2. –ó–∞–º–µ–Ω–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –Ω–∞ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π
3. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Å–∏—Å—Ç–µ–º–æ–π –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏
"""

print("üîß –ó–∞–º–µ–Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤...")

with open('templates/generate/new.html', 'r', encoding='utf-8') as f:
    content = f.read()

# 1. –£–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (—Å–≤–µ—Ä—Ö—É, –≤–Ω–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
print("\n1Ô∏è‚É£ –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–µ—Ä—Ö—É...")

# –ò—â–µ–º –±–ª–æ–∫ —Å –ø–µ—Ä–≤—ã–º –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤ (–¥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
old_ref_block_top = """    <!-- Reference Images Upload Component -->
    <div class="mt-6">
      <div class="card p-6">
        {% include 'generate/reference_upload_component.html' with target_id='image' %}
      </div>
    </div>"""

if old_ref_block_top in content:
    content = content.replace(old_ref_block_top, '')
    print("‚úÖ –£–¥–∞–ª—ë–Ω –±–ª–æ–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤ —Å–≤–µ—Ä—Ö—É")
else:
    print("‚ÑπÔ∏è  –ë–ª–æ–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤ —Å–≤–µ—Ä—Ö—É –Ω–µ –Ω–∞–π–¥–µ–Ω (–≤–æ–∑–º–æ–∂–Ω–æ —É–∂–µ —É–¥–∞–ª—ë–Ω)")

# 2. –ó–∞–º–µ–Ω—è–µ–º –≤—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö) –Ω–∞ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
print("\n2Ô∏è‚É£ –ó–∞–º–µ–Ω–∞ –Ω–∞ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö...")

old_ref_in_params = "{% include 'generate/reference_upload_component.html' with target_id='image' %}"
new_ref_in_params = "{% include 'generate/reference_upload_compact.html' with target_id='image' %}"

if old_ref_in_params in content:
    content = content.replace(old_ref_in_params, new_ref_in_params)
    print("‚úÖ –ó–∞–º–µ–Ω—ë–Ω –Ω–∞ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç")
else:
    print("‚ÑπÔ∏è  –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–∂–µ –∑–∞–º–µ–Ω—ë–Ω –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω")

# –°–æ—Ö—Ä–∞–Ω—è–µ–º
with open('templates/generate/new.html', 'w', encoding='utf-8') as f:
    f.write(content)

print("\n‚úÖ –ó–∞–º–µ–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
print("\n–¢–µ–ø–µ—Ä—å:")
print("1. ‚úÖ –†–µ—Ñ–µ—Ä–µ–Ω—Å—ã —Ç–æ–ª—å–∫–æ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö (–Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è)")
print("2. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç")
print("3. ‚úÖ –°–∫—Ä–µ–ø–æ—á–∫–∞ –∏ –º–∞–ª–µ–Ω—å–∫–∏–π —Ç–µ–∫—Å—Ç")
print("4. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–æ 320px")
print("5. ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π/—Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã")
print("\nüìã –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:")
print("- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Å–∏—Å—Ç–µ–º–æ–π –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–ª–æ—Ç–æ–≤")
